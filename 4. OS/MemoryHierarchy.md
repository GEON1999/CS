# 메모리 계층 구조(Memory Hierarchy)

## 메모리 계층의 개념

메모리 계층 구조(Memory Hierarchy)는 컴퓨터 시스템에서 데이터를 저장하는 다양한 수준의 메모리 장치들을 계층적으로 구성한 것입니다. 이 구조는 속도, 용량, 비용 간의 균형을 맞추기 위해 설계되었습니다.

메모리 계층은 다음과 같은 구성 요소로 이루어져 있습니다:

- **레지스터**: CPU 내의 작은 메모리, 휘발성, 속도 가장 빠름, 기억 용량이 가장 적음
- **캐시**: CPU 내의 L1, L2 캐시를 지칭, 휘발성, 속도 빠름, 기억 용량이 적음
- **주기억장치**: RAM을 가리킴, 휘발성, 속도 보통, 기억 용량이 보통
- **보조기억장치**: HDD, SSD를 일컬으며 비휘발성, 속도 낮음, 기억 용량이 많음

## 메모리 계층이 존재하는 이유

### 1. 더 빠른 접근과 처리 속도 향상

우리는 보통 많이 쓰는 데이터를 다시 많이 사용합니다. 이 때문에 특정 데이터에 많이 접근하게 되는데, 더 작은 캐시 메모리에 해당 데이터가 있다면 더 빠르게 해당 데이터에 접근이 가능합니다. 그로 인해 처리 속도도 증가하게 됩니다.

### 2. 비용의 효율성

캐시 메모리는 비싸고 RAM 등 아래로 갈수록 비용은 더 저렴합니다. 계층이 있고 캐싱 때문에 비용을 좀 더 효율적으로 사용할 수 있습니다.

### 3. 자원의 효율적 사용

메모리 계층 구조는 자주 접근하는 데이터는 빠른 메모리에, 덜 접근하는 데이터는 느린 메모리에 저장하여 자원을 효율적으로 사용할 수 있습니다.

이렇게 하면 거의 접근하지 않은 데이터에 비싸고 빠른 메모리를 사용하지 않게 되어 자원을 낭비하지 않게 됩니다.

## 실생활 예시: 로딩 화면의 의미

우리가 흔히 볼 수 있는 "로딩 중" 화면은 보조기억장치(HDD/SSD)나 네트워크에서 데이터를 읽어 주기억장치(RAM)로 전송하는 과정이 아직 완료되지 않았음을 의미합니다.

## 메모리 계층의 특성 비교

| 계층         | 속도      | 용량      | 휘발성   | 비용      | 예시              |
| ------------ | --------- | --------- | -------- | --------- | ----------------- |
| 레지스터     | 가장 빠름 | 가장 적음 | 휘발성   | 가장 비쌈 | CPU 내부 레지스터 |
| 캐시         | 매우 빠름 | 적음      | 휘발성   | 비쌈      | L1, L2, L3 캐시   |
| 주기억장치   | 보통      | 중간      | 휘발성   | 중간      | RAM               |
| 보조기억장치 | 느림      | 많음      | 비휘발성 | 저렴      | HDD, SSD          |

## 메모리 계층 구조의 작동 원리

### 캐싱(Caching)

상위 계층의 메모리는 하위 계층 메모리의 일부 데이터를 복사하여 저장합니다. 이를 캐싱이라고 합니다.

1. **캐시 히트(Cache Hit)**: CPU가 요청한 데이터가 캐시에 있을 때
2. **캐시 미스(Cache Miss)**: CPU가 요청한 데이터가 캐시에 없을 때

### 지역성의 원리(Principle of Locality)

캐싱이 효과적인 이유는 프로그램이 '지역성'이라는 특성을 가지기 때문입니다:

1. **시간 지역성(Temporal Locality)**: 최근에 접근한 데이터는 가까운 미래에 다시 접근할 가능성이 높음
2. **공간 지역성(Spatial Locality)**: 특정 데이터 주변의 데이터도 곧 접근할 가능성이 높음
